{"version":3,"sources":["webpack:///./src/api/search.js","webpack:///src/components/base/SearchBox/searchBox.vue","webpack:///./src/components/base/SearchBox/searchBox.vue?ce1b","webpack:///./src/components/base/SearchBox/searchBox.vue","webpack:///src/components/base/Top/Top.vue","webpack:///./src/components/base/Top/Top.vue?50ae","webpack:///./src/components/base/Top/Top.vue","webpack:///src/components/Search/Search.vue","webpack:///./src/components/Search/Search.vue?56bc","webpack:///./src/components/Search/Search.vue"],"names":["val","url","__WEBPACK_IMPORTED_MODULE_1__config__","baseUrl","__WEBPACK_IMPORTED_MODULE_0_axios___default","a","get","keywords","type","page","ipage","itype","searchBox","computed","extends_default","Object","vuex_esm","methods","blur","focus","searchKeyWords","trim","clearSearchResultData","SearchBox_searchBox","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","ref","attrs","placeholder","domProps","on","searchFocus","click","searchBlur","keyup","$event","_k","keyCode","key","searchEnter","input","target","composing","clearKeywords","_e","staticRenderFns","Top","SearchBox","__webpack_require__","normalizeComponent","ssrContext","PlayerMini","Top_Top","searching","playlist","length","playing","cancleSearch","Top_Component","Top_normalizeComponent","__webpack_exports__","Search","mixin","Scroll","searchHistory","reverse","_this","result","err","Search_Search","_l","item","index","toSearch","_s","deleteSearchHistory","to","searchSuggest","id","_insertSong","album","artist","Component"],"mappings":"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","file":"static/js/1.f457a054b9cf1cc0551f.js","sourcesContent":["import axios from 'axios';\r\nimport apiConfig from './config';\r\n\r\n// 获取搜索建议\r\nexport function getSearchSuggest(val) {\r\n  const url = `${apiConfig.baseUrl}/search/suggest?keywords=${val}`;\r\n  return axios.get(url);\r\n}\r\n\r\n// 获取搜索结果\r\n// type: 搜索类型；默认为 1 即单曲, 取值意义 : 1: 单曲 10: 专辑 100: 歌手 1000: 歌单 1002: 用户 1004: MV 1006: 歌词 1009: 电台\r\nexport function getSearchResult(keywords, type, page) {\r\n  const ipage = page || 0;\r\n  const itype = type || 1;\r\n  const url = `${apiConfig.baseUrl}/search?keywords=${keywords}&offset=${ipage * 20}&type=${itype}&limit=20`;\r\n  return axios.get(url);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/search.js","<!-- 搜索框组件 -->\r\n<template>\r\n  <div class=\"search-box\">\r\n    <i class=\"iconfont icon-search\"></i>\r\n    <input type=\"search\" v-model=\"keywords\" placeholder=\"搜索音乐、歌手、歌词\" @focus=\"searchFocus\" @click=\"searchFocus\" @blur=\"searchBlur\" @keyup.enter=\"searchEnter\" ref=\"searchinput\">\r\n    <i class=\"iconfont icon-close\" v-if=\"keywords !== ''\" @click=\"clearKeywords\"></i>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      keywords: '',\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState([\r\n      'searchKeyWords',\r\n    ]),\r\n  },\r\n  methods: {\r\n    // 清空搜索框\r\n    clearKeywords() {\r\n      this.keywords = '';\r\n    },\r\n    // 搜索框获取焦点时\r\n    searchFocus() {\r\n      this.$router.push('/search');\r\n      this.setSearchFocus(true);\r\n    },\r\n    searchBlur() {\r\n      this.setSearchFocus(false);\r\n    },\r\n    searchEnter() {\r\n      this.blur();\r\n      this.$router.push('/search/1');\r\n    },\r\n    // 提供给父组件调用\r\n    blur() {\r\n      this.$refs.searchinput.blur();\r\n    },\r\n    focus() {\r\n      this.$refs.searchinput.focus();\r\n    },\r\n    ...mapMutations({\r\n      setSearchKeyWords: 'SET_SEARCH_KEYWORDS',\r\n      setSearchFocus: 'SET_SEARCHING_FOCUS',\r\n    }),\r\n    ...mapActions([\r\n      'clearSearchResultData',\r\n    ]),\r\n  },\r\n  created() {\r\n    this.keywords = this.searchKeyWords;\r\n  },\r\n  watch: {\r\n    // 关键字改变时\r\n    keywords(val) {\r\n      this.setSearchKeyWords(val.trim());\r\n    },\r\n    searchKeyWords(val) {\r\n      this.keywords = val;\r\n      this.clearSearchResultData();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .search-box{\r\n    width: 100%;\r\n    position: relative;\r\n    vertical-align: top;\r\n    padding: 0 36px;\r\n    background: #fff;\r\n    border-radius: 22px;\r\n  }\r\n  .search-box input{\r\n    vertical-align: top;\r\n    width: 100%;\r\n    border: none;\r\n    padding: 0;\r\n    height: 30px;\r\n    line-height: 18px;\r\n    font-size: 14px;\r\n    outline: none;\r\n    background: #fff;\r\n    color: #000;\r\n  }\r\n  .icon-search{\r\n    font-size: 14px;\r\n    color: #d6d6d6;\r\n    position: absolute;\r\n    left: 12px;\r\n    top: 0;\r\n    line-height: 30px;\r\n  }\r\n  .icon-close{\r\n    font-size: 14px;\r\n    color: #d6d6d6;\r\n    position: absolute;\r\n    right: 12px;\r\n    top: 0;\r\n    line-height: 30px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/base/SearchBox/searchBox.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-box\"},[_c('i',{staticClass:\"iconfont icon-search\"}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keywords),expression:\"keywords\"}],ref:\"searchinput\",attrs:{\"type\":\"search\",\"placeholder\":\"搜索音乐、歌手、歌词\"},domProps:{\"value\":(_vm.keywords)},on:{\"focus\":_vm.searchFocus,\"click\":_vm.searchFocus,\"blur\":_vm.searchBlur,\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.searchEnter($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.keywords=$event.target.value}}}),_vm._v(\" \"),(_vm.keywords !== '')?_c('i',{staticClass:\"iconfont icon-close\",on:{\"click\":_vm.clearKeywords}}):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-0540861e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/base/SearchBox/searchBox.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0540861e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./searchBox.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./searchBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./searchBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0540861e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./searchBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0540861e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/base/SearchBox/searchBox.vue\n// module id = null\n// module chunks = ","<!--头部组件-->\r\n<template>\r\n  <div class=\"header\">\r\n    <search-box class=\"header-search\" ref=\"searchboxref\"></search-box>\r\n    <transition name=\"sx\">\r\n      <div class=\"search-right\" v-if=\"searching || playlist.length\"></div>\r\n    </transition>\r\n    <transition name=\"fade\">\r\n      <player-mini :playing=\"playing\" v-show=\"!searching\" class=\"player-mini\"></player-mini>\r\n    </transition>\r\n    <transition name=\"slide\">\r\n        <span class=\"cancle-search\" v-show=\"searching\" @click=\"cancleSearch\">取消</span>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchBox from '@/components/base/SearchBox/searchBox';\r\nimport PlayerMini from '@/components/base/PlayerMini/PlayerMini';\r\nimport { mapState, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  components: {\r\n    SearchBox,\r\n    PlayerMini,\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    };\r\n  },\r\n  computed: {\r\n    // 使用对象展开运算符将此对象混入到外部对象中\r\n    ...mapState([\r\n      'searching',\r\n      'playing',\r\n      'playlist',\r\n    ]),\r\n  },\r\n  methods: {\r\n    cancleSearch() {\r\n      // this.$refs.searchboxref.clearKeywords();\r\n      this.setSearchKeyWords('');\r\n      this.$router.push('/');\r\n    },\r\n    focus() {\r\n      this.$refs.searchboxref.focus();\r\n    },\r\n    ...mapMutations({\r\n      setSearchKeyWords: 'SET_SEARCH_KEYWORDS',\r\n    }),\r\n  },\r\n  watch: {\r\n    searching: function searching(val) {\r\n      if (!val) {\r\n        // this.$refs.searchboxref.clearKeywords();\r\n        this.$refs.searchboxref.blur();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .header{\r\n    position: relative;\r\n    background: #d63c34;\r\n    padding: 7px 10px;\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    display: flex;\r\n    /* z-index: 2; */\r\n  }\r\n  /* .header-search{\r\n    transition: all 0.3s;\r\n  } */\r\n  .cancle-search{\r\n    display: block;\r\n    position: absolute;\r\n    line-height: 30px;\r\n    color: #fff;\r\n    font-size: 16px;\r\n    top: 7px;\r\n    right: 10px;\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n  .player-mini{\r\n    position: absolute;\r\n    right: 13px;\r\n    top: 11px;\r\n    opacity: 1;\r\n  } \r\n\r\n  .search-right{\r\n    width: 42px;\r\n    flex: 0 0 auto;\r\n  }\r\n\r\n  /*取消按钮过渡*/\r\n  .slide-enter-active, .slide-leave-active{\r\n    transition: all .3s ease;\r\n  }\r\n  .slide-enter, .slide-leave-to{\r\n    transform: translateX(100%);\r\n    opacity: 0.5;\r\n  }\r\n\r\n  /*mini播放器过渡*/\r\n  .fade-enter-active, .fade-leave-active {\r\n    transition: opacity .2s;\r\n  }\r\n  .fade-enter, .fade-leave-to {\r\n    opacity: 0;\r\n  }\r\n\r\n  .sx-enter-active, .sx-leave-active {\r\n    transition: all .2s;\r\n  }\r\n  .sx-enter, .sx-leave-to {\r\n    width: 0;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/base/Top/Top.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('search-box',{ref:\"searchboxref\",staticClass:\"header-search\"}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"sx\"}},[(_vm.searching || _vm.playlist.length)?_c('div',{staticClass:\"search-right\"}):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('player-mini',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searching),expression:\"!searching\"}],staticClass:\"player-mini\",attrs:{\"playing\":_vm.playing}})],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide\"}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searching),expression:\"searching\"}],staticClass:\"cancle-search\",on:{\"click\":_vm.cancleSearch}},[_vm._v(\"取消\")])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-64aea32a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/base/Top/Top.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64aea32a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./Top.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Top.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Top.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64aea32a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./Top.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64aea32a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/base/Top/Top.vue\n// module id = null\n// module chunks = ","<!--头部组件-->\r\n<template>\r\n  <div class=\"search\">\r\n    <top ref=\"topRef\"></top>\r\n    <!--搜索历史-->\r\n    <scroll class=\"search-hidtory-scroll\">\r\n      <p class=\"search-label search-hidtory-label\">搜索历史</p>\r\n      <ul>\r\n        <li v-for=\"(item, index) in searchHistoryReverse\" :key=\"`searchhistory${index}`\" class=\"search-suggest-item search-hidtory-item\">\r\n          <i class=\"iconfont icon-time\"></i>\r\n          <p class=\"overflow-ellipsis\" @click=\"toSearch(item)\">{{ item }}</p>\r\n          <i class=\"iconfont icon-close2\" @click=\"deleteSearchHistory(item)\"></i>\r\n        </li>\r\n      </ul>\r\n    </scroll>\r\n\r\n    <!--搜索建议-->\r\n    <scroll class=\"search-suggest-scroll\" v-if=\"searchKeyWords\">\r\n      <router-link to=\"/search/1\">\r\n        <div v-if=\"searchKeyWords\" class=\"search-suggest-to-search\">搜索：{{ searchKeyWords }}</div>\r\n      </router-link>\r\n      <!--单曲-->\r\n      <div v-if=\"searchSuggest.songs\">\r\n        <p class=\"search-label search-suggest-label\">单曲</p>\r\n        <ul>\r\n          <li v-for=\"item in searchSuggest.songs\" :key=\"item.id\" class=\"search-suggest-item overflow-ellipsis\" @click=\"_insertSong(item)\">{{ item.name }} - {{ item.album.name }}</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!--专辑-->\r\n      <div v-if=\"searchSuggest.albums\">\r\n        <p class=\"search-label search-suggest-label\">专辑</p>\r\n        <ul>\r\n            <li v-for=\"item in searchSuggest.albums\" :key=\"item.id\" class=\"search-suggest-item overflow-ellipsis\">{{ item.name }} - {{ item.artist.name }}</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!--歌单-->\r\n      <div v-if=\"searchSuggest.playlists\">\r\n        <p class=\"search-label search-suggest-label\">歌单</p>\r\n        <ul>\r\n            <li v-for=\"item in searchSuggest.playlists\" :key=\"item.id\" class=\"search-suggest-item overflow-ellipsis\">{{ item.name }}</li>\r\n        </ul>\r\n      </div>\r\n    </scroll>\r\n\r\n    <!-- 搜索结果 -->\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { songMixin } from '@/assets/js/mixin';\r\nimport Scroll from '@/components/base/Scroll/Scroll';\r\nimport Top from '@/components/base/Top/Top';\r\nimport { getSearchSuggest } from '@/api/search';\r\nimport { mapState, mapMutations, mapActions } from 'vuex';\r\n\r\n\r\nexport default {\r\n  mixins: [songMixin],\r\n  components: {\r\n    Scroll,\r\n    Top,\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    };\r\n  },\r\n  computed: {\r\n    searchHistoryReverse() {\r\n      const searchHistory = [...this.searchHistory];\r\n      return searchHistory.reverse();\r\n    },\r\n    // 使用对象展开运算符将此对象混入到外部对象中\r\n    ...mapState([\r\n      'searchKeyWords',\r\n      'searchSuggest',\r\n      'searchResult',\r\n      'searchFocus',\r\n      'searchHistory',\r\n    ]),\r\n  },\r\n  methods: {\r\n    // 获取搜索建议\r\n    _getSearchSuggest(val) {\r\n      getSearchSuggest(val).then((res) => {\r\n        if (res.data.result) {\r\n          this.setSearchSuggest(res.data.result);\r\n        }\r\n        // console.log(res.data.result);\r\n      }).catch((err) => {\r\n        console.log(err);\r\n      });\r\n    },\r\n    // 点击搜索历史\r\n    toSearch(keywords) {\r\n      this.setSearchKeyWorde(keywords);\r\n      this.$router.push('/search/1');\r\n    },\r\n    ...mapMutations({\r\n      setSearchSuggest: 'SET_SEARCH_SUGGEST',\r\n      setSearching: 'SET_SEARCHING',\r\n      setSearchKeyWorde: 'SET_SEARCH_KEYWORDS',\r\n    }),\r\n    ...mapActions([\r\n      'deleteSearchHistory',\r\n    ]),\r\n  },\r\n  created() {\r\n    this.setSearching(true);\r\n  },\r\n  beforeDestroy() {\r\n    this.setSearching(false);\r\n    // this.setSearchKeyWorde('');\r\n  },\r\n  mounted() {\r\n    if (!this.searchKeyWords) {\r\n      this.$refs.topRef.focus();\r\n    }\r\n  },\r\n  watch: {\r\n    searchKeyWords: function searchKeyWords(val) {\r\n      if (val) {\r\n        this._getSearchSuggest(val);\r\n      } else {\r\n        this.setSearchSuggest('');\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .search{\r\n    position: fixed;\r\n    top: 44px;\r\n    bottom: 0;\r\n    width: 100%;\r\n  }\r\n  .search-label{\r\n    font-size: 12px;\r\n    background: #f5f5f5;\r\n    line-height: 2;\r\n    padding-left: .5em;\r\n  }\r\n\r\n  /*搜索历史*/\r\n  .search-hidtory-scroll{\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    z-index: 1;\r\n  }\r\n\r\n  /*搜索建议*/\r\n  .search-suggest-scroll{\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 2;\r\n    height: 100%;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    background: #fff;\r\n  }\r\n\r\n  .search-suggest-item{\r\n    display: flex;\r\n    align-items: center;\r\n    height: 42px;\r\n    margin-left: 6px;\r\n    box-sizing: border-box;\r\n    border-bottom: 1px solid #e2e3e5;\r\n    color: #000;\r\n  }\r\n  .search-suggest-item:last-child{\r\n    border: none;\r\n  }\r\n  .search-suggest-to-search{\r\n    font-size: 14px;\r\n    line-height: 3;\r\n    border-bottom: 1px solid #e2e3e5;\r\n    margin-left: 0.5em;\r\n    color: #547fb2;\r\n  }\r\n  \r\n  /*搜索历史*/\r\n  .search-hidtory-item>p{\r\n    flex: 1 1 auto;\r\n    padding: 0 6px;\r\n    line-height: 1;\r\n  }\r\n  .search-hidtory-item .iconfont{\r\n    flex: 0 0 auto;\r\n    color: #9c9d9f;\r\n  }\r\n  .search-hidtory-item .icon-close2{\r\n    padding: 0 10px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Search/Search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('top',{ref:\"topRef\"}),_vm._v(\" \"),_c('scroll',{staticClass:\"search-hidtory-scroll\"},[_c('p',{staticClass:\"search-label search-hidtory-label\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.searchHistoryReverse),function(item,index){return _c('li',{key:(\"searchhistory\" + index),staticClass:\"search-suggest-item search-hidtory-item\"},[_c('i',{staticClass:\"iconfont icon-time\"}),_vm._v(\" \"),_c('p',{staticClass:\"overflow-ellipsis\",on:{\"click\":function($event){_vm.toSearch(item)}}},[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('i',{staticClass:\"iconfont icon-close2\",on:{\"click\":function($event){_vm.deleteSearchHistory(item)}}})])}))]),_vm._v(\" \"),(_vm.searchKeyWords)?_c('scroll',{staticClass:\"search-suggest-scroll\"},[_c('router-link',{attrs:{\"to\":\"/search/1\"}},[(_vm.searchKeyWords)?_c('div',{staticClass:\"search-suggest-to-search\"},[_vm._v(\"搜索：\"+_vm._s(_vm.searchKeyWords))]):_vm._e()]),_vm._v(\" \"),(_vm.searchSuggest.songs)?_c('div',[_c('p',{staticClass:\"search-label search-suggest-label\"},[_vm._v(\"单曲\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.searchSuggest.songs),function(item){return _c('li',{key:item.id,staticClass:\"search-suggest-item overflow-ellipsis\",on:{\"click\":function($event){_vm._insertSong(item)}}},[_vm._v(_vm._s(item.name)+\" - \"+_vm._s(item.album.name))])}))]):_vm._e(),_vm._v(\" \"),(_vm.searchSuggest.albums)?_c('div',[_c('p',{staticClass:\"search-label search-suggest-label\"},[_vm._v(\"专辑\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.searchSuggest.albums),function(item){return _c('li',{key:item.id,staticClass:\"search-suggest-item overflow-ellipsis\"},[_vm._v(_vm._s(item.name)+\" - \"+_vm._s(item.artist.name))])}))]):_vm._e(),_vm._v(\" \"),(_vm.searchSuggest.playlists)?_c('div',[_c('p',{staticClass:\"search-label search-suggest-label\"},[_vm._v(\"歌单\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.searchSuggest.playlists),function(item){return _c('li',{key:item.id,staticClass:\"search-suggest-item overflow-ellipsis\"},[_vm._v(_vm._s(item.name))])}))]):_vm._e()],1):_vm._e(),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-000114dc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/Search/Search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-000114dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=styles&index=0!./Search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=script&index=0!./Search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-000114dc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.0@vue-loader/lib/selector?type=template&index=0!./Search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-000114dc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Search/Search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}